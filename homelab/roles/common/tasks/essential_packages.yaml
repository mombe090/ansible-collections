- name: Install Development tools on RedHat family
  become: true
  ansible.builtin.dnf:
    name: "@Development Tools"
    state: present
  when: ansible_os_family == 'RedHat' and initialization == true

- name: Install EPEL repository
  become: true
  ansible.builtin.dnf:
    name: epel-release
    state: present
  when: ansible_os_family == 'RedHat' and initialization == true

- name: Install essential packages on Debian family
  become: true
  ansible.builtin.apt:
    name:
      - apt-transport-https
      - ca-certificates
      - curl
      - fzf
      - git
      - gh
      - gnupg
      - jq
      - python3
      - python3-pip
      - neovim
      - nmap
      - nfs-common
      - prometheus-node-exporter
      - qemu-guest-agent
      - tmux
      - unzip
      - vim
      - xz-utils
      - zoxide
      - zip
      - zsh
    update_cache: true
  when: ansible_os_family == 'Debian' and initialization == true

- name: Install essential packages on RedHat family
  become: true
  ansible.builtin.dnf:
    name:
      - git
      - util-linux-user
      - ca-certificates
      - curl
      - cryptsetup
      - dnf-utils
      - fzf
      - python3
      - python3-pip
      - git
      - gh
      - gnupg
      - jq
      - neovim
      - nmap
      - nfs-utils
      - python3.12
      - qemu-guest-agent
      - iscsi-initiator-utils
      - tmux
      - unzip
      - vim
      - openssl-devel
      - bzip2-devel
      - libffi-devel
      - yum-utils
      - xz
      - zoxide
      - zip
      - zsh
    update_cache: true
  when: ansible_os_family == 'RedHat' and initialization == true

- name: Install go-task
  become: true
  ansible.builtin.shell:
    cmd: sh -c "$(curl --location https://taskfile.dev/install.sh)" -- -d -b /usr/local/bin
    creates: /usr/local/bin/task
  when: initialization == true
