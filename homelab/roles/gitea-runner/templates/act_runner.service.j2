[Unit]
Description=Gitea Actions runner
Documentation=https://gitea.com/gitea/act_runner
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/act_runner daemon --config {{ gitea_runner_config_file }}
ExecReload=/bin/kill -s HUP $MAINPID
WorkingDirectory={{ gitea_runner_home }}
TimeoutSec=0
RestartSec=10
Restart=always
User={{ gitea_runner_user }}
Group={{ gitea_runner_group }}
EnvironmentFile=/etc/act_runner/act_runner.env

# Security settings
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths={{ gitea_runner_home }}
ReadWritePaths=/var/log/act_runner

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=act_runner

[Install]
WantedBy=multi-user.target
