- name: Download Cloud Image if not exists
  ansible.builtin.get_url:
    url: "{{ item.url }}"
    dest: "/var/lib/vz/template/iso/{{ item.name }}.img"
    mode: "0644"
  loop: "{{ distributions }}"
  vars:
    distributions:
      - name: ubuntu-2024-04
        url: https://cloud-images.ubuntu.com/noble/20241210/noble-server-cloudimg-amd64.img
        checksum: sha256:e61484705035cd64d8e79c35d6f674acccf03ef9c6939ca50dea8a4fdc7eabeb

      - name: debian-13
        url: https://cdimage.debian.org/images/cloud/bookworm/20241201-1948/debian-12-generic-amd64-20241201-1948.qcow2
        checksum: sha256:94db5b062486d2070c712bd96a7a85e5873ec17fc17bad3262639f9974a3491e13695fac1e72b006c20014b12b7bf211b017059f5b3e41d5da24990a7c1cc332

      - name: rocky-9
        url: https://dl.rockylinux.org/pub/rocky/9/images/x86_64/Rocky-9-GenericCloud-Base-9.5-20241118.0.x86_64.qcow2
        checksum: sha256:069493fdc807300a22176540e9171fcff2227a92b40a7985a0c1c9e21aeebf57

      - name: alma-9
        url: https://repo.almalinux.org/almalinux/9/cloud/x86_64/images/AlmaLinux-9-GenericCloud-9.5-20241120.x86_64.qcow2
        checksum: sha256:abddf01589d46c841f718cec239392924a03b34c4fe84929af5d543c50e37e37
